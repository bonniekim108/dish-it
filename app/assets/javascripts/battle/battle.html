<div id="nominate" class="row text-center battlepage">


    <div class="style">
      <h2>{{vm.curBattle.dish.cuisine}}: {{vm.curBattle.dish.name}}</h2>
    </div> 
    <div class="row" ng-if="vm.displayMode == 'nominating' || vm.displayMode == 'great-eight'">

      <span ng-if="vm.displayMode == 'nominating'"><button ng-show="vm.userCanVote()" ui-sref="shell.nominate" class="button right">Nominate Restaurant</button></span>
      
      <ul class="large-block-grid-4 medium-block-grid-3 text-center">
        <li ng-repeat="restaurant in vm.curBattle.restaurants | limitTo: vm.displayLimit() track by restaurant.id">
          <div class="battle-restaurants">

            <a ui-sref="shell.restaurant({id:restaurant.id})"><img ng-src="{{restaurant.yelp_photo_url}}" class="battle-restaurant-image"></a><br>

            <strong><a ui-sref="shell.restaurant({id:restaurant.id})">{{restaurant.name}}</a></strong><br />
            <button ng-show="vm.userCanVote()" ng-click="vm.upvote(restaurant.id, '')" class="button">Vote</button>

            <img ng-src="{{restaurant.yelp_rating_photo_url}}">
            <p>{{restaurant.votes.length}} votes</p>

          </div>
        </li>
      </ul>
    </div>

    <div ng-if="vm.displayMode == 'final-four'">
      <ul class="large-block-grid-2 medium-block-grid-2 text-center">
        <li ng-repeat="restaurant in vm.curBattle.restaurants | limitTo: 4  track by restaurant.id">
          <div class="battle-restaurants">

            <a ui-sref="shell.restaurant({id:restaurant.id})"><img ng-src="{{restaurant.yelp_photo_url}}" class="battle-restaurant-image-2"></a><br>

            <strong><a ui-sref="shell.restaurant({id:restaurant.id})">{{restaurant.name}}</a></strong><br />
            <button ng-show="vm.userCanVote()" ng-click="vm.upvote(restaurant)" class="button">Vote</button>
            <img ng-src="{{restaurant.yelp_rating_photo_url}}">
            <!-- display votes to test? -->
            <p>{{restaurant.votes.length}} votes</p>
          </div>
        </li>
      </ul>
    </div>

    <div id="upvote-modal" class="reveal-modal small" data-reveal>
      <h3 class="upvote-title">{{vm.pendingUpvote.name}}</h3>
      <textarea ng-model="vm.comment" placeholder="comments..." rows="5"></textarea>
      <button ng-click="vm.finalizeUpvote()">Vote</button>
      <a class="close-reveal-modal">&#215;</a>
    </div>

</div>


